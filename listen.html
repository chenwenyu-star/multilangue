<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¬ Â· ä¸‰å£°å›å“ (è¿›é˜¶ç‰ˆ)</title>
    <style>
        body {
            font-family: -apple-system, sans-serif;
            background: #f2f2f7; margin: 0; padding: 20px;
            display: flex; flex-direction: column; align-items: center;
        }
        .container { width: 100%; max-width: 400px; background: white; border-radius: 30px; padding: 30px; box-sizing: border-box; box-shadow: 0 10px 30px rgba(0,0,0,0.05); position: relative; }
        
        /* ç§¯åˆ†ä¸å‹‹ç« åŒº */
        .stats-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; width: 100%; }
        .score-box { background: #e5e5ea; padding: 5px 15px; border-radius: 15px; font-size: 14px; font-weight: bold; }
        .badge { font-size: 24px; display: none; animation: pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes pop { 0% { transform: scale(0); } 100% { transform: scale(1); } }

        /* åŠ¨æ€å›½æ——ä¸æ’­æ”¾åŒº */
        .audio-section { text-align: center; margin-bottom: 30px; }
        .flag-display { font-size: 50px; height: 60px; margin-bottom: 10px; transition: 0.3s; }
        .play-btn { 
            width: 90px; height: 90px; border-radius: 50%; border: none;
            background: #ff9f0a; color: white; font-size: 35px; cursor: pointer;
            box-shadow: 0 8px 20px rgba(255, 159, 10, 0.3); transition: 0.3s;
        }
        .play-btn:disabled { background: #e5e5ea; box-shadow: none; cursor: not-allowed; }

        /* é¢˜ç›®åŒº */
        .question-box { display: none; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .option-btn {
            width: 100%; padding: 15px; margin-bottom: 10px; border: 2px solid #e5e5ea;
            border-radius: 15px; background: white; text-align: left; font-size: 15px;
            cursor: pointer; transition: 0.2s;
        }
        .option-btn.correct { border-color: #30d158; background: #eafaea; }
        .option-btn.wrong { border-color: #ff3b30; background: #fbeaea; }

        .result-msg { margin-top: 15px; font-size: 14px; color: #3a3a3c; line-height: 1.5; display: none; }
        
        /* ä¸‹ä¸€å…³æŒ‰é’® */
        .next-btn {
            width: 100%; padding: 15px; margin-top: 20px; border: none;
            border-radius: 15px; background: #007aff; color: white;
            font-size: 16px; font-weight: bold; display: none; cursor: pointer;
        }

        .back-link { margin-top: 30px; text-decoration: none; color: #8e8e93; font-size: 13px; }
    </style>
</head>
<body>

    <div class="container">
        <div class="stats-bar">
            <div class="score-box">å¾—åˆ†: <span id="score">0</span></div>
            <div class="badge" id="badge">ğŸ… é‡‘è€³æœµå‹‹ç« </div>
            <div class="score-box">å…³å¡: <span id="level">1</span>/10</div>
        </div>

        <div class="audio-section">
            <div class="flag-display" id="flag">ğŸ§</div>
            <button class="play-btn" id="mainPlayBtn" onclick="startLevel()">ğŸ”Š</button>
            <div class="status-text" id="status" style="margin-top:10px; color:#8e8e93;">ç‚¹å‡»å¼€å§‹å¬åŠ›æŒ‘æˆ˜</div>
        </div>

        <div class="question-box" id="questionBox">
            <h3 style="font-size:16px;">åˆšæ‰å¬åˆ°çš„å‘éŸ³åŒºåˆ«æ˜¯ï¼Ÿ</h3>
            <div id="optionsContainer"></div>
            <div class="result-msg" id="resultMsg"></div>
            <button class="next-btn" id="nextBtn" onclick="loadNextLevel()">ä¸‹ä¸€å…³ â†’</button>
        </div>

        <div style="text-align:center;"><a href="index.html" class="back-link">â† é€€å‡ºç»ƒä¹ </a></div>
    </div>

    <script>
        // 10ä¸ªå¯¹æ¯”ç»ƒä¹ è¯åº“
        const quizData = [
            { word: "Radio", fr: "Radio", it: "Radio", options: ["æ³•è¯­ R åœ¨å–‰å’™å¤„æ‘©æ“¦ï¼Œæ„è¯­ R èˆŒå°–é¢¤åŠ¨", "æ³•è¯­è¯»ä½œ L", "æ²¡åŒºåˆ«"], correct: 0, exp: "æ³•è¯­æ˜¯å°èˆŒéŸ³ï¼Œæ„è¯­æ˜¯å¤§èˆŒéŸ³ã€‚" },
            { word: "Station", fr: "Station", it: "Stazione", options: ["æ³•è¯­æœ«å°¾æ˜¯é¼»åŒ–å…ƒéŸ³ï¼Œæ„è¯­æœ«å°¾æ¸…è„†", "æ³•è¯­è¯»éŸ³æ›´é•¿", "æ„è¯­æœ«å°¾ä¸å‘éŸ³"], correct: 0, exp: "æ³•è¯­ -tion å¸¦æœ‰é¼»éŸ³æ„Ÿï¼Œæ„è¯­ -zione ç»“å°¾å…ƒéŸ³æ¸…æ™°ã€‚" },
            { word: "Important", fr: "Important", it: "Importante", options: ["æ„è¯­ç»“å°¾å…ƒéŸ³æ¸…æ™°ï¼Œæ³•è¯­ç»“å°¾ä¸å‘éŸ³å¹¶é¼»åŒ–", "å‘éŸ³å®Œå…¨ä¸€æ ·", "æ³•è¯­æ›´çŸ­"], correct: 0, exp: "æ³•è¯­ç»“å°¾çš„ t ä¸å‘éŸ³ï¼Œan å‘é¼»éŸ³ã€‚" },
            { word: "Vino/Vin", fr: "Vin", it: "Vino", options: ["æ³•è¯­å•éŸ³èŠ‚é¼»éŸ³ï¼Œæ„è¯­åŒéŸ³èŠ‚æ¸…è„†", "æ„è¯­æœ‰é¼»éŸ³", "ä¸€æ ·"], correct: 0, exp: "æ³•è¯­ Vin æ˜¯å…¸å‹çš„é¼»åŒ–å…ƒéŸ³ï¼Œæ„è¯­ Vino ç»“å°¾ o å¾ˆå“äº®ã€‚" },
            { word: "Hotel", fr: "HÃ´tel", it: "Hotel", options: ["ä¸¤è€…çš„ H éƒ½ä¸å‘éŸ³", "æ³•è¯­ H åæ°”ï¼Œæ„è¯­ä¸å‘éŸ³", "æ„è¯­ H åæ°”"], correct: 0, exp: "åœ¨ç½—æ›¼è¯­ä¸­ï¼ŒH ç»å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯â€˜æ²‰é»˜â€™çš„ã€‚" },
            { word: "Grazie", fr: "GrÃ¢ce", it: "Grazie", options: ["æ„è¯­æœ‰ä¸‰éŸ³èŠ‚ä¸”é¢¤éŸ³æ˜æ˜¾ï¼Œæ³•è¯­æ›´çŸ­ä¿ƒ", "æ³•è¯­æœ‰é¢¤éŸ³", "æ²¡åŒºåˆ«"], correct: 0, exp: "æ„è¯­ Grazie éœ€è¦å¼¹èˆŒï¼Œä¸” zi-e åˆ†å¼€å¿µã€‚" },
            { word: "Nature", fr: "Nature", it: "Natura", options: ["æ³•è¯­æœ«å°¾æ˜¯åœ†å”‡éŸ³ uï¼Œæ„è¯­æ˜¯æ¸…è„†çš„ a", "æ³•è¯­è¯» Natura", "æ²¡åŒºåˆ«"], correct: 0, exp: "æ³•è¯­çš„ u æ˜¯åœ†å”‡éŸ³ /y/ï¼Œæ„è¯­ç»“å°¾ a éå¸¸é¥±æ»¡ã€‚" },
            { word: "Psychologie", fr: "Psychologie", it: "Psicologia", options: ["æ„è¯­ P å‘éŸ³æ¸…æ™°ï¼Œæ³•è¯­ P è¾ƒå¼±", "æ³•è¯­ P ä¸å‘éŸ³", "ä¸€æ ·"], correct: 0, exp: "æ„/è¥¿è¯­é€šå¸¸ä¿ç•™è¯é¦– Ps çš„ P å‘éŸ³ã€‚" },
            { word: "Manger", fr: "Manger", it: "Mangiare", options: ["æ³•è¯­ç»“å°¾ r ä¸å‘éŸ³ï¼Œæ„è¯­ç»“å°¾ e å‘éŸ³", "æ„è¯­ r ä¸å‘éŸ³", "ä¸€æ ·"], correct: 0, exp: "æ³•è¯­ç¬¬ä¸€ç»„åŠ¨è¯ -er ç»“å°¾é€šå¸¸è¯» /e/ã€‚" },
            { word: "Chat/Gatto", fr: "Chat", it: "Gatto", options: ["æ³•è¯­ ch è¯»â€˜å˜˜â€™å£°ï¼Œæ„è¯­ g æ˜¯æµŠéŸ³", "æ²¡åŒºåˆ«", "æ³•è¯­è¯»â€˜å’”â€™"], correct: 0, exp: "æ³•è¯­ ch å¯¹åº”è‹±è¯­ sh çš„éŸ³ï¼Œæ„è¯­ g å‘â€˜å˜â€™éŸ³ã€‚" }
        ];

        let currentLevel = 0;
        let score = 0;
        let consecutiveCorrect = 0;
        const synth = window.speechSynthesis;

        async function startLevel() {
            const data = quizData[currentLevel];
            const playBtn = document.getElementById('mainPlayBtn');
            playBtn.disabled = true;

            // æ’­æ”¾æ³•è¯­
            updateUI("ğŸ‡«ğŸ‡·", "æ­£åœ¨æ’­æ”¾ï¼šæ³•è¯­...");
            await speak(data.fr, 'fr-FR');
            await sleep(1000);

            // æ’­æ”¾æ„è¯­
            updateUI("ğŸ‡®ğŸ‡¹", "æ­£åœ¨æ’­æ”¾ï¼šæ„å¤§åˆ©è¯­...");
            await speak(data.it, 'it-IT');
            
            updateUI("âœ…", "æ’­æ”¾å®Œæ¯•ï¼Œè¯·é€‰æ‹©ï¼");
            showQuestion();
            playBtn.disabled = false;
        }

        function speak(text, lang) {
            return new Promise(resolve => {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = lang;
                utterance.rate = 0.8;
                utterance.onend = resolve;
                synth.